import{s as U,o as j,n as E,f as z,h as A}from"../chunks/scheduler.1f6706a1.js";import{S as X,i as B,g as v,h as k,j as y,f as m,k as p,a as w,t as I,b as J,d as D,p as K,z as L,s as $,r as P,x,c as b,u as M,y as g,v as S,w as V,m as q,n as O,o as N}from"../chunks/index.5dc5c8e5.js";import{e as F}from"../chunks/each.e59479a4.js";import{P as T}from"../chunks/Pokemon.60ed7d86.js";function G(h,e,s){const t=h.slice();return t[6]=e[s],t[8]=s,t}function Q(h){let e,s=F(h[4]),t=[];for(let r=0;r<s.length;r+=1)t[r]=H(G(h,s,r));return{c(){e=v("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=k(r,"DIV",{class:!0});var i=y(e);for(let l=0;l<t.length;l+=1)t[l].l(i);i.forEach(m),this.h()},h(){p(e,"class","fighters-wrapper svelte-1c4xt0g")},m(r,i){w(r,e,i);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(r,i){if(i&19){s=F(r[4]);let l;for(l=0;l<s.length;l+=1){const c=G(r,s,l);t[l]?t[l].p(c,i):(t[l]=H(c),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=s.length}},i:E,o:E,d(r){r&&m(e),L(t,r)}}}function R(h){let e,s,t="Draw !",r,i,l,c,u,a,d="New Fight",f;return i=new T({props:{pokemon:h[4][0]}}),c=new T({props:{pokemon:h[4][1]}}),{c(){e=v("div"),s=v("h1"),s.textContent=t,r=$(),P(i.$$.fragment),l=$(),P(c.$$.fragment),u=$(),a=v("a"),a.textContent=d,this.h()},l(o){e=k(o,"DIV",{class:!0});var n=y(e);s=k(n,"H1",{"data-svelte-h":!0}),x(s)!=="svelte-1z03tk5"&&(s.textContent=t),r=b(n),M(i.$$.fragment,n),l=b(n),M(c.$$.fragment,n),n.forEach(m),u=b(o),a=k(o,"A",{href:!0,class:!0,"data-svelte-h":!0}),x(a)!=="svelte-1dp28qv"&&(a.textContent=d),this.h()},h(){p(e,"class","winner svelte-1c4xt0g"),p(a,"href","/"),p(a,"class","new-fight svelte-1c4xt0g")},m(o,n){w(o,e,n),g(e,s),g(e,r),S(i,e,null),g(e,l),S(c,e,null),w(o,u,n),w(o,a,n),f=!0},p:E,i(o){f||(D(i.$$.fragment,o),D(c.$$.fragment,o),f=!0)},o(o){I(i.$$.fragment,o),I(c.$$.fragment,o),f=!1},d(o){o&&(m(e),m(u),m(a)),V(i),V(c)}}}function W(h){let e,s,t=h[2].name.toUpperCase()+"",r,i,l,c,u,a,d="New Fight",f;return c=new T({props:{pokemon:h[2]}}),{c(){e=v("div"),s=v("h1"),r=q(t),i=q(" wins !"),l=$(),P(c.$$.fragment),u=$(),a=v("a"),a.textContent=d,this.h()},l(o){e=k(o,"DIV",{class:!0});var n=y(e);s=k(n,"H1",{});var _=y(s);r=O(_,t),i=O(_," wins !"),_.forEach(m),l=b(n),M(c.$$.fragment,n),n.forEach(m),u=b(o),a=k(o,"A",{href:!0,class:!0,"data-svelte-h":!0}),x(a)!=="svelte-1dp28qv"&&(a.textContent=d),this.h()},h(){p(e,"class","winner svelte-1c4xt0g"),p(a,"href","/"),p(a,"class","new-fight svelte-1c4xt0g")},m(o,n){w(o,e,n),g(e,s),g(s,r),g(s,i),g(e,l),S(c,e,null),w(o,u,n),w(o,a,n),f=!0},p(o,n){(!f||n&4)&&t!==(t=o[2].name.toUpperCase()+"")&&N(r,t);const _={};n&4&&(_.pokemon=o[2]),c.$set(_)},i(o){f||(D(c.$$.fragment,o),f=!0)},o(o){I(c.$$.fragment,o),f=!1},d(o){o&&(m(e),m(u),m(a)),V(c)}}}function H(h){let e,s,t,r,i,l=(h[0][h[8]].hp>0?h[0][h[8]].hp:0)+"",c,u,a,d,f,o;return{c(){e=v("div"),s=v("p"),t=v("img"),i=$(),c=q(l),u=$(),a=v("img"),o=$(),this.h()},l(n){e=k(n,"DIV",{class:!0});var _=y(e);s=k(_,"P",{class:!0});var C=y(s);t=k(C,"IMG",{src:!0,alt:!0,class:!0}),i=b(C),c=O(C,l),C.forEach(m),u=b(_),a=k(_,"IMG",{src:!0,alt:!0,style:!0,class:!0}),o=b(_),_.forEach(m),this.h()},h(){var n;z(t.src,r="/src/lib/assets/heart.png")||p(t,"src",r),p(t,"alt",""),p(t,"class","svelte-1c4xt0g"),p(s,"class","svelte-1c4xt0g"),z(a.src,d=h[6].sprites.front_default)||p(a,"src",d),p(a,"alt",""),p(a,"style",h[8]===0?"transform: scaleX(-1);":""),p(a,"class",f=A(`fighter-img ${(n=h[1][h[8]])!=null&&n.hurted?"hurted":""}`)+" svelte-1c4xt0g"),p(e,"class","figther-wrapper svelte-1c4xt0g")},m(n,_){w(n,e,_),g(e,s),g(s,t),g(s,i),g(s,c),g(e,u),g(e,a),g(e,o)},p(n,_){var C;_&1&&l!==(l=(n[0][n[8]].hp>0?n[0][n[8]].hp:0)+"")&&N(c,l),_&2&&f!==(f=A(`fighter-img ${(C=n[1][n[8]])!=null&&C.hurted?"hurted":""}`)+" svelte-1c4xt0g")&&p(a,"class",f)},d(n){n&&m(e)}}}function Y(h){let e,s,t,r;const i=[W,R,Q],l=[];function c(u,a){return u[2]?0:u[3]?1:2}return s=c(h),t=l[s]=i[s](h),{c(){e=v("div"),t.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var a=y(e);t.l(a),a.forEach(m),this.h()},h(){p(e,"class","main svelte-1c4xt0g")},m(u,a){w(u,e,a),l[s].m(e,null),r=!0},p(u,[a]){let d=s;s=c(u),s===d?l[s].p(u,a):(K(),I(l[d],1,1,()=>{l[d]=null}),J(),t=l[s],t?t.p(u,a):(t=l[s]=i[s](u),t.c()),D(t,1),t.m(e,null))},i(u){r||(D(t),r=!0)},o(u){I(t),r=!1},d(u){u&&m(e),l[s].d()}}}function Z(h,e,s){let{data:t}=e;const{fighters:r}=t;let i=[{uuid:r[0].uuid,hp:r[0].hp},{uuid:r[1].uuid,hp:r[1].hp}],l=[],c,u=!1;return j(()=>{const a=setInterval(async()=>{r.forEach((d,f)=>{var n;const o=f===0?1:0;s(0,i[o].hp-=Math.floor(Math.random()*d.attack),i),s(1,l[f]={uuid:d.uuid,hurted:!((n=l[f])!=null&&n.hurted)},l)}),i[0].hp<=0?(s(2,c=r[1]),await fetch(`http://localhost:5173/fight?winner=${c.uuid}&loser=${r[0].uuid}`,{method:"POST"})):i[1].hp<=0?(s(2,c=r[0]),await fetch(`http://localhost:5173/fight?winner=${c.uuid}&loser=${r[1].uuid}`,{method:"POST"})):i[0].hp<=0&&i[1].hp<=0&&(s(3,u=!0),await fetch(`http://localhost:5173/fight?&winner=${r[0].uuid}&looser=${r[1].uuid}&isDraw=true`,{method:"POST"})),(i[0].hp<=0||i[1].hp<=0)&&clearInterval(a)},500);return()=>clearInterval(a)}),h.$$set=a=>{"data"in a&&s(5,t=a.data)},[i,l,c,u,r,t]}class re extends X{constructor(e){super(),B(this,e,Z,Y,U,{data:5})}}export{re as component};
